# Bank Web Application

## Запуск приложения

### Вариант 1: Docker Compose (рекомендуется)

1. Убедитесь, что установлены Docker и Docker Compose
2. Клонируйте репозиторий
3. Выполните команду:
```bash
docker-compose up -d
```

Приложение будет доступно по адресу: http://localhost:5000
Swagger UI: http://localhost:5000/swagger

### Вариант 2: Локальный запуск

1. Установите .NET 8 SDK
2. Установите SQL Server
3. Выполните команды:
```bash
cd BankWebApplication/TransactionService.API
dotnet restore
dotnet run
```

Логи записываются в:
- Консоль

## Лицензия

MIT License

# Тестовое задание: Web API для финансовых транзакций

## Описание

Дан interface, описывающий финансовую транзакцию:

```csharp
public interface ITransaction
{
    Guid Id { get; }
    Guid ClientId { get; }
    DateTime DateTime { get; }
    decimal Amount { get; }
}
```

## Задача

Создайте реализации этого интерфейса:
- **CreditTransaction** (зачисление средств клиенту)
- **DebitTransaction** (списание средств у клиента)

Напишите Web API, позволяющее зачислять и списывать средства у указанного клиента, отменять указанную транзакцию и получать актуальный баланс клиента.

## API Endpoints

В сервисе должно быть 4 запроса:

### 1. POST /credit

**Request:**
```json
{
    "id": "8f0452b2-867b-4ef8-9a9d-3c9c03d9afdf",
    "clientId": "cfaa0d3f-7fea-4423-9f69-ebff826e2f89",
    "dateTime": "2019-04-02T13:10:20.0263632+03:00",
    "amount": 23.05
}
```

**Response 200 OK:**
```json
{
    "insertDateTime": "2024-10-25T12:03:34+05:00",
    "clientBalance": 23.05
}
```

### 2. POST /debit

**Request:**
```json
{
    "id": "05eb235c-4955-4c16-bcdd-34e8178228de",
    "clientId": "cfaa0d3f-7fea-4423-9f69-ebff826e2f89",
    "dateTime": "2019-04-02T13:10:25.0263632+03:00",
    "amount": 23.05
}
```

**Response 200 OK:**
```json
{
    "insertDateTime": "2024-10-25T12:03:34+05:00",
    "clientBalance": 0
}
```

### 3. POST /revert

**Request:**
```
POST /revert?id=05eb235c-4955-4c16-bcdd-34e8178228de
```

**Response 200 OK:**
```json
{
    "revertDateTime": "2024-10-25T12:03:34+05:00",
    "clientBalance": 23.05
}
```

### 4. GET /balance

**Request:**
```
GET /balance?id=05eb235c-4955-4c16-bcdd-34e8178228de
```

**Response 200 OK:**
```json
{
    "balanceDateTime": "2024-10-25T12:03:34+05:00",
    "clientBalance": 23.05
}
```

## Требования

### Идемпотентность
Методы POST должны быть идемпотентными: при повторной отправке запроса он должен возвращать результат отправки предыдущего запроса с таким же Id.

### Валидация
Необходимо реализовать валидацию:
- Сумма в транзакциях должна быть всегда положительной
- Дата не может быть в будущем
- У клиента нельзя списать больше средств, чем есть на балансе

### Обработка ошибок
Обработку ошибок необходимо реализовать в соответствии с RFC 9457.

### Хранение данных
Способ хранения данных - в реляционной СУБД на усмотрение соискателя, предпочтительно:
- PostgreSQL
- SQL Server

### Масштабируемость
Крайне не рекомендуется ограничивать работоспособность сервиса одним инстансом (ничто не должно препятствовать запуску двух и более инстансов сервиса).

### Логирование
Способ логирования - на усмотрение соискателя.

### Дополнительная функциональность
Дополнительная функциональность - на усмотрение соискателя.

### Docker
Приветствуется использование docker compose для быстрого запуска тестового задания.
